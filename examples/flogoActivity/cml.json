{
    "name":"FinTech",
    "description":"Transforms FinTech mostly catagorical data to useable format",
    "version":"0.0.1",
    "createdDate":"20190913",
    "model":{
        "framework":"Tensorflow",
        "tags":"serve",
        "signatureDefs":"def_signature"
    },
	"input": [
    {
		    "type": "array",
        "label":"dataIn"
    }
	],
	"structure": [
    {
      "operation":"concatMap",
      "input":{
        "data":"$dataIn"
      },
      "output":"datatemp"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['Age']",
        "value":100,
        "minvalue":18
      },
      "output":"datatemp['Age']"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['Amount']",
        "value":500
      },
      "output":"datatemp['Amount']"
    },
    {  
      "operation":"replaceValue",
      "input":
      {
        "data":"$datatemp",
        "replaceMap":{"f":1,"m":0}
      },
      "params":{"col":["gender"]},
      "output":"datatemp"
    },
    {
      "operation":"oneHotEncoding",
      "input":{"data":"$datatemp"},
      "params":{
        "col": ["bank","cardType","entry_type","transaction"],
        "separateOut":false
      },
      "output":"datatemp"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['v1']",
        "value":5,
        "minvalue":-5
      },
      "output":"datatemp['v1']"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['v2']",
        "value":5,
        "minvalue":-5
      },
      "output":"datatemp['v2']"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['v3']",
        "value":5,
        "minvalue":-5
      },
      "output":"datatemp['v3']"
    },
    {
      "operation":"normalize",
      "input":{
        "data":"$datatemp['v4']",
        "value":5,
        "minvalue":-5
      },
      "output":"datatemp['v4']"
    },
    {
      "operation":"multPairWise",
      "input":{
        "matrix0":"$datatemp['v4']",
        "matrix1":"$datatemp['v3']"
      },
      "output":"datatemp['v3*v4']"
    },  
    {
      "operation":"multPairWise",
      "input":{
        "matrix0":"$datatemp['v3*v4']",
        "matrix1":"$datatemp['Visa']"
      },
      "output":"datatemp['v3*v4*Visa']"
    }, 
    {
      "operation":"multPairWise",
      "input":{
        "matrix0":"$datatemp['v2']",
        "matrix1":"$datatemp['v1']"
      },
      "output":"datatemp['v1*v2']"
    },  
    {
      "operation":"multPairWise",
      "input":{
        "matrix0":"$datatemp['v1*v2']",
        "matrix1":"$datatemp['Master']"
      },
      "output":"datatemp['v1*v2*Master']"
    },
    {
      "operation":"map2table",
      "input": {
        "map":"$datatemp",
        "colOrder": ["ATM","Age","AmEx","Amount","Bank0","Bank1","Bank10","Bank2","Bank3","Bank4","Bank5","Bank6","Bank7","Bank8","Bank9","INTERNET","Master","Master_Debit","POS","Visa","Visa_Debit","chip","gender","magnetic","v1","v2","v3","v4","v1*v2*Master","v3*v4*Visa"]
      },
      "params":{
        "axis":1
      },
      "output":"datatab"
    }          
  ],
	"output": {
    "type": "array",
    "data":{"output":"$datatab"}
	}
}
